<%= form.hidden_field :_destroy %>
<%= form.hidden_field :id if form.object.persisted? %>
<%= form.hidden_field :position, value: form.object.position || 0, class: "position-input" %>
<%= form.hidden_field :is_time_based, value: false %>

<!-- Exercise Card -->
<div class="border rounded-lg overflow-hidden my-4">
  <div class="bg-gray-50 p-4 flex justify-between items-center">
    <div class="flex items-center">
      <span class="h-6 w-6 rounded-full bg-orange-500 text-white flex items-center justify-center text-sm font-medium">
        <%= form.object.position || "?" %>
      </span>
      <h4 class="ml-2 font-medium">
        <%= form.object.exercise&.name || "Select Exercise" %>
      </h4>
    </div>
    <div class="flex items-center space-x-2">
      <button type="button" class="p-1 rounded-md hover:bg-gray-200" title="Move Up" data-action="plan#moveUp">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>
      </button>
      <button type="button" class="p-1 rounded-md hover:bg-gray-200" title="Move Down" data-action="plan#moveDown">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
      </button>
      <button type="button" class="p-1 rounded-md hover:bg-gray-200 text-red-500" data-action="plan#remove" title="Remove">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="p-4">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="space-y-2">
        <%= form.label :exercise_id, "Exercise", class: "text-sm font-medium" %>
        <%= form.collection_select :exercise_id, Exercise.all, :id, :name,
              { prompt: "Select exercise" },
              class: "w-full rounded-md border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent" %>
      </div>

      <div class="space-y-2">
        <%= form.label :sets, "Sets", class: "text-sm font-medium" %>
        <%= form.number_field :sets, min: 1, max: 10,
              class: "w-full rounded-md border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent" %>
      </div>

      <div class="space-y-2">
        <%= form.label :reps, "Reps", class: "text-sm font-medium" %>
        <%= form.number_field :reps, min: 1, max: 50,
              class: "w-full rounded-md border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent" %>
      </div>

      <div class="space-y-2">
        <%= form.label :duration_time, "Time (sec)", class: "text-sm font-medium" %>
        <%= form.number_field :duration_time, min: 0, max: 300,
              class: "w-full rounded-md border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent" %>
      </div>

      <div class="space-y-2">
        <%= form.label :rest, "Rest (sec)", class: "text-sm font-medium" %>
        <%= form.number_field :rest, min: 0, max: 300,
              class: "w-full rounded-md border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent" %>
      </div>

      <div class="space-y-2 mt-6">
        <%= form.label :is_time_based, "Time-Based", class: "text-sm font-medium" %>
        <%= form.check_box :is_time_based, 
              class: "h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500" %>
      </div>
    </div>
  </div>
</div>
